.\"Modified from man(1) of FreeBSD, the NetBSD mdoc.template, and mdoc.samples.
.\"See Also:
.\"man mdoc.samples for a complete listing of options
.\"man mdoc for the short list of editing options
.\"/usr/share/misc/mdoc.template
.Dd 13/04/11                
.Dt crass 1       
.Os Darwin
.Sh NAME                 
.Nm crass
.Nd the CRISPR Assembler.
.Sh SYNOPSIS             
.Nm
.Op Fl abcdfhklnoswxyDGKSV
.Op Fl "-dumpReads"
.Op Fl "-removeHomopolymers"
.Op Fl "-logToScreen"
.Ao Em sequence_files Ac

.Nm
assemble
ASSEMBLER
.Fl x Ar crass.crispr
.Fl s Ar CONTIGS
.Fl i Ar INPUT_DIR 
.Fl g Ar GROUP
.Op Fl pIohlV 
.Op Fl "-logToScreen" 
.Pp
where ASSEMBLER is one of the following if they are installed:
velvet
cap3

.Sh DESCRIPTION         
.Nm
is a tool for finding and assembling reads from genomic and metagenomic datasets that contain 
.Em C Ns lustered
.Em R Ns egularly
.Em I Ns nterspersed
.Em S Ns hort
.Em P Ns alindromic
.Em R Ns epeats
(CRISPR).  
.Nm
searches through the dataset and identifies reads which contain repeated K-mers that are of a specific length and are 
separated by a spacer sequence.  These possible direct repeats are then curated internally to remove bad matches and 
then reads containing direct repeats are then outputed for further analysis.  

.Pp
.Sh OPTIONS

.Bl -tag -width -indent
.It  
.Nm
.Op Fl hV
.Op Fl a Ar LAYOUT_TYPE
.Op Fl b Ar INT
.Op Fl c Ar COLOUR_TYPE
.Op Fl d Ar INT
.Op Fl f Ar INT
.Op Fl k Ar INT
.Op Fl l Ar INT
.Op Fl n Ar INT
.Op Fl o Ar LOCATION
.Op Fl s Ar INT
.Op Fl w Ar INT
.Op Fl x Ar REAL
.Op Fl y Ar REAL
.Op Fl D Ar INT
.Op Fl G Ar ""
.Op Fl K Ar INT
.Op Fl S Ar INT
.Op Fl "-removeHomopolymers"
.Op Fl "-logToScreen"

.It Fl a Ar LAYOUT_TYPE Fl "\^\-layoutAlgorithm" Ar LAYOUT_TYPE
The Graphviz layout algorithm to be used when rendering graphs.
.It Fl b Ar INT Fl "\^\-numBins" Ar INT
The number of colour bins for the output graph. Default is to have as many colours as there are different values for the coverage of Nodes in the graph.
.It Fl c Ar COLOUR_TYPE Fl "\^\-graphColour" Ar COLOUR_TYPE
The colour scheme for the output graph based on the coverage of each spacer in the CRISPR, can be one from:
.Bl -tag -width -indent
.It red-blue
Low coverage spacers are coloured in red and high coverage spaceres are coloured blue. Intermediates are coloured in shades of purple. 
.It blue-red
Low coverage spacers are coloured in blue and high coverage spaceres are coloured red. Intermediates are coloured in shades of purple.
.It green-red-blue 
Three tone colouring with low coverage spacers in green and high coverage spacers in blue.
.It red-blue-green
Three tone colouring with low coverage spacers in blue and high coverage spacers in green.
.El
.It Fl d Ar INT Fl "\^\-minDR" Ar INT             
The minimim length of the direct repeat to search for [Default: 23] 
.It Fl D Ar INT Fl "\^\-maxDR" Ar INT             
The Maximum length of the direct repeat to search for [Default: 47] 
.It Fl f Ar INT  Fl "\^\-covCutoff" Ar INT           
Defines the minimim number of reads that a putative CRISPR must contain to be considered real. [Default: 10]
.It Fl G Ar ""  Fl "\^\-showSingletons" Ar ""
Set to show unattached spacers in the graph output  
.It Fl h Ar ""  Fl "\^\-help" Ar ""           
Output basic usage informtion to screen
.It Fl l Ar INT Fl "\^\-logLevel" Ar INT
The level of verbosity to ouput in the
.Nm 
log file 
.It Fl "-logToScreen" Ar ""
Print all logging information to stdout rather than a file
.It Fl k Ar INT Fl "\^\-kmerCount" Ar INT            
The number of kmers at two direct repeats must share to be considered part of the same cluster [Default: 12]
.It Fl K Ar INT Fl "\^\-graphNodeLen" Ar INT            
The length of the kmer used to define a node in the graph.  The lower the number the more connected the graph will be but also increases the chance of false positive edges [Default: 7]
.It Fl n Ar INT Fl "\^\-minNumRepeats" Ar INT            
The minimim number of repeats that a candidate CRISPR locus must contain to be considered 'real' [Default: 3]
.It Fl "-noScalling" Ar ""
Use the given spacer and direct repeat ranges when --removeHomopolymers is set.  The default is to use the scale these values based on the values of -x and -y. 
.It Fl o Ar LOCATION  Fl "\^\-outDir" Ar LOCATION          
The name of the ouput directory for the output files [Default: .]
.It Fl s Ar INT Fl "\^\-minSpacer" Ar INT            
The minimim length of the spacer to search for [Default: 26]
.It Fl S Ar INT Fl "\^\-maxSpacer" Ar INT          
The maximim length of the spacer to search for [Default: 50]
.It Fl V   Ar ""  Fl "\^\-version" Ar ""        
Print version and copy right information
.It Fl w Ar INT Fl "\^\-windowLength" Ar INT            
The length of the window size for searching a genome.  Must be between 6 - 9 [Default: 8]
.It Fl x Ar REAL Fl "\^\-spacerScalling" Ar REAL
A decimal number that represents the reduction in size of the spacer when the --removeHomopolymers option is set [Default: 0.7]
.It Fl y Ar REAL Fl "\^\-repeatScalling" Ar REAL
A decimal number that represents the reduction in size of the direct repeat when the --removeHomopolymers option is set [Default: 0.7]

.It  
.Nm
assemble
ASSEMBLER
.Op Fl hV
.Op Fl o Ar PATH
.Op Fl l Ar INT
.Fl i Ar PATH
.Fl g Ar INT
.Fl x Ar PATH
.Fl s Ar INT[,INT]
.Pp 
where ASSEMBLER is one of the following if they are installed:
.Pp
velvet
cap3

.It Fl g Ar INT Fl "\^\-group" Ar INT            
The group number of the CRISPR that you want to assemble
.It Fl h Ar ""  Fl "\^\-help" Ar ""           
Output basic usage informtion to screen
.It Fl i Ar PATH  Fl "\^\-inDir" Ar PATH          
The name of the input directory
.\".It Fl l Ar INT Fl "\^\-logLevel" Ar INT
.\"The level of verbosity to ouput in the
.\".Nm 
.\"log file 
.\".It Fl "-logToScreen" Ar ""
.\"Print all logging information to stdout rather than a file
.It Fl o Ar PATH  Fl "\^\-outDir" Ar PATH          
The name of the output directory [Default: inDir]
.It Fl s Ar INT[,INT] Fl "\^\-segments" Ar INT[,INT]
A comma separated list of numbered segments to assemble from the specified group
.It Fl V   Ar ""  Fl "\^\-version" Ar ""        
Print version and copy right information
.It Fl x Ar FILE Fl "\^\-xml" Ar FILE
The .crispr xml output file created by crass
.El


.Pp
.\" .Sh ENVIRONMENT      \" May not be needed
.\" .Bl -tag -width "ENV_VAR_1" -indent \" ENV_VAR_1 is width of the string ENV_VAR_1
.\" .It Ev ENV_VAR_1
.\" Description of ENV_VAR_1
.\" .It Ev ENV_VAR_2
.\" Description of ENV_VAR_2
.\" .El                      
.Sh FILES                
.Bl -tag -width -indent
.It Pa crass.log
Log file containing information about the last execution of 
.Nm
.It Pa Cluster_[INT].fa
Fasta file of all reads from a cluster created when the --dumpReads option is set.  
.El                      
.Sh DIAGNOSTICS       \" May not be needed
.Ex -std 
.Bl -diag
.It 1
Error in command line processing.
.It 2
Parsing the input files failed.
.It 3
Graph Building Failed.
.It 4
Failure when rendering the debug graphs
.It 5
Failure when cleaning the graphs
.It 6
Error when the contigs are being made from the spacer graphs
.It 7
Failure when removing low coverage graphs
.It 8
Error when writing the spacer dictionary to file
.It 9
Error when writing the reads for each CRISPR
.It 10
Error when rendering the cleaned degub graphs
.It 11
Failure to write the final spacer graphs
.El
.Sh SEE ALSO 
.Xr grep 1  
.\".Xr c 1 ,
.\".Xr a 2 ,
.\".Xr b 2 ,
.\".Xr a 3 ,
.\".Xr b 3 
.\" .Sh BUGS              \" Document known, unremedied bugs 
.\" .Sh HISTORY           \" Document history if command behaves in a unique manner